import json
import jsonlines
from collections import Counter
import pandas as pd
import numpy as np
import matplotlib as mpl
mpl.use('Agg')
import matplotlib.pyplot as plt

a=[]

date_list=['2021-10-22', '2021-10-23', '2021-10-24', '2021-10-25', '2021-10-26', '2021-10-27', '2021-10-28', '2021-10-29', '2021-10-30', '2021-10-31', '2021-11-01', '2021-11-02', '2021-11-03', '2021-11-04', '2021-11-05', '2021-11-06', '2021-11-07', '2021-11-08', '2021-11-09', '2021-11-10', '2021-11-11', '2021-11-12', '2021-11-13', '2021-11-14', '2021-11-15', '2021-11-16', '2021-11-17', '2021-11-18', '2021-11-19', '2021-11-20', '2021-11-21', '2021-11-22', '2021-11-23', '2021-11-24', '2021-11-25', '2021-11-26', '2021-11-27', '2021-11-28', '2021-11-29', '2021-11-30', '2021-12-01', '2021-12-02', '2021-12-03', '2021-12-04', '2021-12-05', '2021-12-06', '2021-12-07', '2021-12-08', '2021-12-09', '2021-12-10', '2021-12-11', '2021-12-12', '2021-12-13', '2021-12-14', '2021-12-15', '2021-12-16', '2021-12-17', '2021-12-18', '2021-12-19', '2021-12-20', '2021-12-21', '2021-12-22', '2021-12-23', '2021-12-24', '2021-12-25', '2021-12-26', '2021-12-27', '2021-12-28', '2021-12-29', '2021-12-30', '2021-12-31', '2022-01-01', '2022-01-02', '2022-01-03', '2022-01-04', '2022-01-05', '2022-01-06', '2022-01-07', '2022-01-08', '2022-01-09', '2022-01-10', '2022-01-11', '2022-01-12', '2022-01-13', '2022-01-14', '2022-01-15', '2022-01-16', '2022-01-17', '2022-01-18', '2022-01-19', '2022-01-20', '2022-01-21', '2022-01-22', '2022-01-23', '2022-01-24', '2022-01-25', '2022-01-26', '2022-01-27', '2022-01-28', '2022-01-29', '2022-01-30', '2022-01-31', '2022-02-01', '2022-02-02', '2022-02-03', '2022-02-04', '2022-02-05', '2022-02-06', '2022-02-07', '2022-02-08', '2022-02-09', '2022-02-10', '2022-02-11', '2022-02-12', '2022-02-13', '2022-02-14', '2022-02-15', '2022-02-16', '2022-02-17', '2022-02-18', '2022-02-19', '2022-02-20', '2022-02-21', '2022-02-22', '2022-02-23', '2022-02-24', '2022-02-25', '2022-02-26', '2022-02-27', '2022-02-28', '2022-03-01', '2022-03-02', '2022-03-03', '2022-03-04', '2022-03-05', '2022-03-06', '2022-03-07', '2022-03-08', '2022-03-09', '2022-03-10', '2022-03-11', '2022-03-12', '2022-03-13', '2022-03-14', '2022-03-15', '2022-03-16', '2022-03-17', '2022-03-18', '2022-03-19', '2022-03-20', '2022-03-21', '2022-03-22', '2022-03-23', '2022-03-24', '2022-03-25', '2022-03-26', '2022-03-27', '2022-03-28', '2022-03-29', '2022-03-30', '2022-03-31', '2022-04-01', '2022-04-02', '2022-04-03', '2022-04-04', '2022-04-05', '2022-04-06', '2022-04-07', '2022-04-08', '2022-04-09', '2022-04-10', '2022-04-11', '2022-04-12', '2022-04-13', '2022-04-14', '2022-04-15', '2022-04-16', '2022-04-17', '2022-04-18', '2022-04-19', '2022-04-20', '2022-04-21', '2022-04-22', '2022-04-23', '2022-04-24', '2022-04-25', '2022-04-26', '2022-04-27', '2022-04-28', '2022-04-29', '2022-04-30', '2022-05-01', '2022-05-02', '2022-05-03', '2022-05-04', '2022-05-05', '2022-05-06', '2022-05-07', '2022-05-08', '2022-05-09', '2022-05-10', '2022-05-11', '2022-05-12', '2022-05-13', '2022-05-14', '2022-05-15', '2022-05-16', '2022-05-17', '2022-05-18', '2022-05-19', '2022-05-20', '2022-05-21', '2022-05-22', '2022-05-23', '2022-05-24', '2022-05-25', '2022-05-26', '2022-05-27', '2022-05-28', '2022-05-29', '2022-05-30', '2022-05-31', '2022-06-01', '2022-06-02', '2022-06-03', '2022-06-04', '2022-06-05', '2022-06-06', '2022-06-07', '2022-06-08', '2022-06-09', '2022-06-10', '2022-06-11', '2022-06-12', '2022-06-13', '2022-06-14', '2022-06-15']
date_dict={'2021-10-22': 0, '2021-10-23': 1, '2021-10-24': 2, '2021-10-25': 3, '2021-10-26': 4, '2021-10-27': 5, '2021-10-28': 6, '2021-10-29': 7, '2021-10-30': 8, '2021-10-31': 9, '2021-11-01': 10, '2021-11-02': 11, '2021-11-03': 12, '2021-11-04': 13, '2021-11-05': 14, '2021-11-06': 15, '2021-11-07': 16, '2021-11-08': 17, '2021-11-09': 18, '2021-11-10': 19, '2021-11-11': 20, '2021-11-12': 21, '2021-11-13': 22, '2021-11-14': 23, '2021-11-15': 24, '2021-11-16': 25, '2021-11-17': 26, '2021-11-18': 27, '2021-11-19': 28, '2021-11-20': 29, '2021-11-21': 30, '2021-11-22': 31, '2021-11-23': 32, '2021-11-24': 33, '2021-11-25': 34, '2021-11-26': 35, '2021-11-27': 36, '2021-11-28': 37, '2021-11-29': 38, '2021-11-30': 39, '2021-12-01': 40, '2021-12-02': 41, '2021-12-03': 42, '2021-12-04': 43, '2021-12-05': 44, '2021-12-06': 45, '2021-12-07': 46, '2021-12-08': 47, '2021-12-09': 48, '2021-12-10': 49, '2021-12-11': 50, '2021-12-12': 51, '2021-12-13': 52, '2021-12-14': 53, '2021-12-15': 54, '2021-12-16': 55, '2021-12-17': 56, '2021-12-18': 57, '2021-12-19': 58, '2021-12-20': 59, '2021-12-21': 60, '2021-12-22': 61, '2021-12-23': 62, '2021-12-24': 63, '2021-12-25': 64, '2021-12-26': 65, '2021-12-27': 66, '2021-12-28': 67, '2021-12-29': 68, '2021-12-30': 69, '2021-12-31': 70, '2022-01-01': 71, '2022-01-02': 72, '2022-01-03': 73, '2022-01-04': 74, '2022-01-05': 75, '2022-01-06': 76, '2022-01-07': 77, '2022-01-08': 78, '2022-01-09': 79, '2022-01-10': 80, '2022-01-11': 81, '2022-01-12': 82, '2022-01-13': 83, '2022-01-14': 84, '2022-01-15': 85, '2022-01-16': 86, '2022-01-17': 87, '2022-01-18': 88, '2022-01-19': 89, '2022-01-20': 90, '2022-01-21': 91, '2022-01-22': 92, '2022-01-23': 93, '2022-01-24': 94, '2022-01-25': 95, '2022-01-26': 96, '2022-01-27': 97, '2022-01-28': 98, '2022-01-29': 99, '2022-01-30': 100, '2022-01-31': 101, '2022-02-01': 102, '2022-02-02': 103, '2022-02-03': 104, '2022-02-04': 105, '2022-02-05': 106, '2022-02-06': 107, '2022-02-07': 108, '2022-02-08': 109, '2022-02-09': 110, '2022-02-10': 111, '2022-02-11': 112, '2022-02-12': 113, '2022-02-13': 114, '2022-02-14': 115, '2022-02-15': 116, '2022-02-16': 117, '2022-02-17': 118, '2022-02-18': 119, '2022-02-19': 120, '2022-02-20': 121, '2022-02-21': 122, '2022-02-22': 123, '2022-02-23': 124, '2022-02-24': 125, '2022-02-25': 126, '2022-02-26': 127, '2022-02-27': 128, '2022-02-28': 129, '2022-03-01': 130, '2022-03-02': 131, '2022-03-03': 132, '2022-03-04': 133, '2022-03-05': 134, '2022-03-06': 135, '2022-03-07': 136, '2022-03-08': 137, '2022-03-09': 138, '2022-03-10': 139, '2022-03-11': 140, '2022-03-12': 141, '2022-03-13': 142, '2022-03-14': 143, '2022-03-15': 144, '2022-03-16': 145, '2022-03-17': 146, '2022-03-18': 147, '2022-03-19': 148, '2022-03-20': 149, '2022-03-21': 150, '2022-03-22': 151, '2022-03-23': 152, '2022-03-24': 153, '2022-03-25': 154, '2022-03-26': 155, '2022-03-27': 156, '2022-03-28': 157, '2022-03-29': 158, '2022-03-30': 159, '2022-03-31': 160, '2022-04-01': 161, '2022-04-02': 162, '2022-04-03': 163, '2022-04-04': 164, '2022-04-05': 165, '2022-04-06': 166, '2022-04-07': 167, '2022-04-08': 168, '2022-04-09': 169, '2022-04-10': 170, '2022-04-11': 171, '2022-04-12': 172, '2022-04-13': 173, '2022-04-14': 174, '2022-04-15': 175, '2022-04-16': 176, '2022-04-17': 177, '2022-04-18': 178, '2022-04-19': 179, '2022-04-20': 180, '2022-04-21': 181, '2022-04-22': 182, '2022-04-23': 183, '2022-04-24': 184, '2022-04-25': 185, '2022-04-26': 186, '2022-04-27': 187, '2022-04-28': 188, '2022-04-29': 189, '2022-04-30': 190, '2022-05-01': 191, '2022-05-02': 192, '2022-05-03': 193, '2022-05-04': 194, '2022-05-05': 195, '2022-05-06': 196, '2022-05-07': 197, '2022-05-08': 198, '2022-05-09': 199, '2022-05-10': 200, '2022-05-11': 201, '2022-05-12': 202, '2022-05-13': 203, '2022-05-14': 204, '2022-05-15': 205, '2022-05-16': 206, '2022-05-17': 207, '2022-05-18': 208, '2022-05-19': 209, '2022-05-20': 210, '2022-05-21': 211, '2022-05-22': 212, '2022-05-23': 213, '2022-05-24': 214, '2022-05-25': 215, '2022-05-26': 216, '2022-05-27': 217, '2022-05-28': 218, '2022-05-29': 219, '2022-05-30': 220, '2022-05-31': 221, '2022-06-01': 222, '2022-06-02': 223, '2022-06-03': 224, '2022-06-04': 225, '2022-06-05': 226, '2022-06-06': 227, '2022-06-07': 228, '2022-06-08': 229, '2022-06-09': 230, '2022-06-10': 231, '2022-06-11': 232, '2022-06-12': 233, '2022-06-13': 234, '2022-06-14': 235, '2022-06-15': 236}

all_all=[1328, 39, 1, 2663, 6, 0, 0, 0, 0, 0, 13, 22, 8, 21, 24, 7, 13, 58, 201, 113, 693, 90, 160, 740, 207, 46, 197, 35, 25, 8, 1092, 12, 13, 15, 50, 27, 7, 5, 21, 16, 45, 22, 17, 17, 4, 5, 11, 19, 11, 8, 5, 10, 69, 128, 2, 12, 0, 80, 68, 62, 46, 74, 17, 14, 44, 5, 10, 16, 10, 1, 3, 8, 5, 5, 5, 11, 17, 2, 219, 47, 46, 43, 18, 25, 10, 35, 0, 4, 6, 12, 16, 5, 5, 4, 3, 5, 21, 16, 10, 6, 7, 8, 24, 23, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 166, 48, 50, 27, 46, 76, 115, 50, 71, 64, 38, 38, 79, 105, 132, 55, 28, 10, 9, 69, 81, 16, 50, 16, 39, 82, 51, 25, 36, 11, 8, 19, 23, 20, 38, 14, 25, 1, 0, 0, 0, 121, 292, 679, 112, 67, 323, 76, 69, 18, 37, 20, 14, 21, 29, 72, 55, 126, 43, 9, 68, 22, 27, 14, 60, 139, 32, 105, 51, 82, 106, 81, 19, 193, 339, 388, 425, 66, 37, 12, 33, 18, 0, 0, 0, 0, 79, 20, 53, 17, 128, 35, 29, 5, 5, 4, 14, 33, 225, 107, 6, 8, 18, 38, 132, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
all_high=[77, 1, 0, 119, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 11, 8, 5, 11, 7, 3, 1, 2, 0, 0, 0, 12, 0, 0, 2, 0, 0, 0, 0, 1, 0, 26, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 30, 0, 0, 0, 9, 4, 2, 13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 6, 0, 2, 0, 0, 0, 0, 1, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 2, 0, 1, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 28, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 2, 0, 18, 0, 0, 0, 0, 0, 0, 0, 0, 84, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

sel_all=[46, 2, 0, 103, 4, 0, 0, 0, 0, 0, 5, 9, 4, 13, 19, 3, 5, 18, 149, 37, 24, 14, 18, 40, 13, 16, 9, 4, 6, 2, 0, 3, 5, 6, 2, 8, 2, 3, 7, 4, 6, 5, 8, 11, 2, 2, 5, 8, 4, 5, 3, 1, 17, 9, 1, 0, 0, 18, 22, 33, 26, 36, 14, 11, 4, 3, 4, 8, 6, 1, 0, 5, 3, 4, 4, 4, 7, 2, 59, 8, 10, 9, 4, 10, 2, 11, 0, 1, 5, 2, 6, 5, 4, 0, 2, 4, 6, 3, 9, 6, 5, 5, 9, 10, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 55, 22, 24, 12, 22, 21, 20, 20, 50, 48, 25, 6, 31, 25, 30, 14, 8, 8, 5, 19, 14, 13, 21, 13, 21, 17, 21, 20, 12, 11, 6, 6, 10, 10, 12, 7, 8, 1, 0, 0, 0, 71, 42, 85, 52, 22, 17, 28, 27, 8, 28, 12, 5, 14, 14, 20, 13, 24, 14, 8, 14, 5, 7, 7, 4, 5, 12, 18, 17, 9, 26, 38, 13, 51, 176, 173, 172, 27, 11, 5, 8, 5, 0, 0, 0, 0, 33, 12, 14, 10, 32, 12, 14, 4, 2, 2, 8, 25, 8, 37, 5, 7, 10, 18, 40, 19, 16, 3, 8, 5, 0, 0, 0, 0, 73, 23, 17, 12, 2]
sel_high=[3, 0, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 1, 0, 5, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 2, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 8, 0, 0, 0, 0, 0, 0, 0, 0, 25, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 0, 0, 0]

sel_all_sort=[176, 173, 172, 149, 103, 85, 73, 71, 59, 55]
sel_all_index=[192,193,194,18,3,161,232,159,78,118]
sel_all_date=['2022-05-02', '2022-05-03', '2022-05-04', '2021-11-09', '2021-10-25', '2022-04-01', '2022-06-11', '2022-03-30', '2022-01-08', '2022-02-17']

all_all_sort=[2663, 1328, 1092, 740, 693, 679, 425, 388, 339, 323]
all_all_index=[3, 0, 30, 23, 20, 161, 194, 193, 192, 164]
all_all_date=['2021-10-25', '2021-10-22', '2021-11-21', '2021-11-14', '2021-11-11', '2022-04-01', '2022-05-04', '2022-05-03', '2022-05-02', '2022-04-04']
date_l=range(237)


datelist=['2021-10-22', '2021-10-25', '2021-11-09', '2021-11-11', '2021-11-14', '2021-11-21', '2022-01-08', '2022-02-17', '2022-03-30', '2022-04-01', '2022-04-04', '2022-05-02', '2022-05-03', '2022-05-04', '2022-06-11']
def draw_number ():

    plt.plot(date_l, all_all,'b',label='total attacks')
    plt.plot(date_l,sel_all,'g',label='attacks above 3 minutes')
    plt.xlabel("date")
    plt.ylabel("total attacks")
    plt.legend()
    plt.title("web attack within a year")
    plt.show()
    plt.savefig('all_compare.png')

# all_all.sort(reverse=True)
# print(all_all[:10])

# for j in all_all_sort:
#     a.append(all_all.index(j))

# for i in sel_all_index:
#     a.append(date_list[i])
# print(a)
x=[]
y=[]

for i in datelist:
    index=date_dict[i]
    x.append(all_all[index])
    y.append(sel_all[index])
    print(sel_all[index]/all_all[index])

